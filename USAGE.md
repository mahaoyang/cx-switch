# 使用指南

## 功能说明

### 1. 表单编辑模式（推荐）

在新增或编辑配置时，默认使用表单编辑模式，这样更直观且不容易出错。

#### Auth 配置编辑器

- **OPENAI_API_KEY**：输入你的 OpenAI API 密钥
- **自定义字段**：可以添加任意自定义字段，比如其他 API 密钥
  - 输入字段名和字段值
  - 点击"添加字段"按钮
  - 删除不需要的字段

#### Config 配置编辑器

**基础设置**
- **模型 (model)**：选择或输入模型名称，支持自动补全
- **推理强度 (model_reasoning_effort)**：low、medium、high
- **禁用响应存储**：勾选框
- **模型提供商 (model_provider)**：指定使用的提供商

**模型提供商配置**
- 可以添加多个提供商配置
- 每个提供商包含：
  - 名称 (name)
  - Base URL (base_url)
  - Wire API (wire_api)
  - 环境变量键 (env_key)
  - 是否需要 OpenAI 认证 (requires_openai_auth)
- 支持为每个提供商添加自定义字段

**项目信任级别**
- 添加项目路径和对应的信任级别
- 支持 trusted 和 untrusted 两种级别

### 2. 原始文本编辑模式

如果你熟悉 JSON 和 TOML 格式，可以切换到"原始文本"标签页直接编辑。

- 失焦时会自动验证格式
- 格式错误会自动恢复到上一次正确的值

### 3. 高级编辑选项

在表单编辑器中，每个部分都有"高级：直接编辑"折叠选项，可以直接编辑原始格式，适合：
- 复制粘贴现有配置
- 批量修改
- 处理复杂的嵌套结构

## 配置切换流程

### 自动应用配置

- 在右侧详情中选择“切换到此配置”按钮，会立即把 auth.json 与 config.toml 写入当前系统用户目录下的 `~/.codex/`。
- 如果正在 Windows 或 WSL 环境，会出现一个带提示的开关（默认关闭）；开启后会在 Windows ↔ WSL 之间双端同步，保证两个系统的 `~/.codex` 同步。
- 仍然可以使用下方的导出或复制功能进行额外备份。

### 方法一：导出到目录（推荐）

1. 选择要使用的配置
2. 点击"切换到此配置"按钮（标记为当前配置）
3. 切换到"导出配置"标签页
4. 点击"导出到目录"按钮
5. 在文件选择器中选择 `~/.codex` 目录
6. 确认，配置文件会自动创建/覆盖

### 方法二：复制粘贴

1. 选择要使用的配置
2. 切换到"导出配置"标签页
3. 点击"复制 auth.json"或"复制 config.toml"
4. 手动粘贴到对应文件中

## 配置管理技巧

### 1. 配置命名建议

- 使用描述性名称，如：
  - "OpenAI GPT-4 Production"
  - "Azure OpenAI GPT-4"
  - "OpenRouter Claude Sonnet"
  - "Testing - GPT-3.5"

### 2. 添加描述

- 在描述中记录：
  - 使用场景
  - API 配额限制
  - 特殊配置说明
  - 最后更新时间

### 3. 配置分类

建议为不同用途创建多套配置：
- **开发环境**：使用较小的模型，节省成本
- **生产环境**：使用高性能模型
- **测试环境**：专门的测试 API 密钥
- **备用配置**：备用 API 提供商

### 4. 数据备份

配置数据存储在浏览器 LocalStorage 中，建议：
- 定期导出重要配置到文件
- 使用浏览器书签或导出功能备份
- 避免清除浏览器数据

## 常见问题

### Q: 为什么我的配置没有保存？

A: 配置保存在浏览器的 LocalStorage 中，确保：
- 浏览器允许本地存储
- 没有使用无痕模式
- 没有清除浏览器数据

### Q: 如何在多台电脑之间同步配置？

A: 目前需要手动操作：
1. 在配置预览页复制配置内容
2. 在另一台电脑上粘贴并保存
3. 或者使用浏览器的同步功能（如果浏览器支持同步 LocalStorage）

### Q: 导出到目录时提示权限错误？

A: File System Access API 需要用户授权：
- 确保使用 Chrome/Edge 最新版本
- 在弹出的权限对话框中允许访问
- 首次访问需要手动选择目录

### Q: 可以添加哪些自定义字段？

A: 理论上可以添加任意字段，只要：
- 字段名不与现有字段冲突
- 符合 JSON/TOML 格式规范
- Codex 能够识别该字段（查看 Codex 文档）

## 快捷键

- 模态框中按 `Esc` 关闭
- 添加字段时按 `Enter` 确认

## 浏览器兼容性

- ✅ Chrome 86+
- ✅ Edge 86+
- ✅ Opera 72+
- ❌ Firefox（File System Access API 支持有限）
- ❌ Safari（不支持 File System Access API）

不支持的浏览器仍可使用复制粘贴功能。
